# üìö Introduction: HTTP, REST API ‡πÅ‡∏•‡∏∞ JSON

## üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏ô‡∏µ‡πâ

‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á:
1. Client-Server Architecture
2. HTTP Protocol
3. REST API
4. JSON Data Format

---

## 1Ô∏è‚É£ Client-Server Architecture ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

### ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ             ‚îÇ  ‚îÄ‚îÄ‚îÄ Request ‚îÄ‚îÄ‚îÄ>  ‚îÇ             ‚îÇ
‚îÇ   CLIENT    ‚îÇ                    ‚îÇ   SERVER    ‚îÇ
‚îÇ  (ESP32)    ‚îÇ  <‚îÄ‚îÄ‚îÄ Response ‚îÄ‚îÄ  ‚îÇ (Raspberry  ‚îÇ
‚îÇ             ‚îÇ                    ‚îÇ     Pi)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö IoT

| Component | ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|-----------|-------|---------|
| **Client** | ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠ (Request) | ESP32 ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sensor |
| **Server** | ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Response) | Raspberry Pi ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á

```
‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ = Server
‡∏Ñ‡∏∏‡∏ì = Client

1. ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Request)
2. ‡∏£‡πâ‡∏≤‡∏ô‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Processing)
3. ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Response)
```

---

## 2Ô∏è‚É£ HTTP Protocol

### HTTP ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**HTTP** = **H**yper**T**ext **T**ransfer **P**rotocol

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏é‡πÄ‡∏Å‡∏ì‡∏ë‡πå (Protocol) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Client ‡πÅ‡∏•‡∏∞ Server ‡∏ö‡∏ô‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï

### HTTP Request Structure

```
POST /api/data HTTP/1.1
Host: 192.168.1.50:8000
Content-Type: application/json

{"device_id":"esp32-01","temp":28.5,"hum":65.3}
```

**‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:**
1. **Method**: POST (‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£)
2. **Path**: /api/data (‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á resource)
3. **Headers**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡∏¥‡∏° ‡πÄ‡∏ä‡πà‡∏ô Content-Type
4. **Body**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (JSON)

### HTTP Methods ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢‡πÉ‡∏ô IoT

| Method | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|--------|----------|---------|
| **GET** | ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î |
| **POST** | ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà | ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤ sensor |
| **PUT** | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ |
| **DELETE** | ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏•‡∏ö log ‡πÄ‡∏Å‡πà‡∏≤ |

### HTTP Response Structure

```
HTTP/1.1 200 OK
Content-Type: application/json

{"ok":true,"message":"Data received successfully"}
```

**‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:**
1. **Status Code**: 200 (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•)
2. **Headers**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡∏¥‡∏°
3. **Body**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

### HTTP Status Codes ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ

| Code | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á |
|------|---------|---------|
| **200** | OK | ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à |
| **201** | Created | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à |
| **400** | Bad Request | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î |
| **404** | Not Found | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |
| **422** | Unprocessable Entity | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏° schema |
| **500** | Internal Server Error | Server ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î |

---

## 3Ô∏è‚É£ REST API

### REST ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**REST** = **RE**presentational **S**tate **T**ransfer

‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö API ‡∏ó‡∏µ‡πà‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ HTTP Protocol

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ REST

1. **Stateless**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞ request ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö ‡πÑ‡∏°‡πà‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤ session
2. **Resource-based**: ‡πÉ‡∏ä‡πâ URL ‡πÅ‡∏ó‡∏ô resource (‡πÄ‡∏ä‡πà‡∏ô /api/data)
3. **HTTP Methods**: ‡πÉ‡∏ä‡πâ GET, POST, PUT, DELETE
4. **JSON Format**: ‡πÉ‡∏ä‡πâ JSON ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á REST API Endpoints

```
GET    /api/data           ‚Üí ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
GET    /api/data/123       ‚Üí ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ID 123
POST   /api/data           ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
PUT    /api/data/123       ‚Üí ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ID 123
DELETE /api/data/123       ‚Üí ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ID 123
```

### REST API ‡πÉ‡∏ô Workshop ‡∏ô‡∏µ‡πâ

| Method | Endpoint | ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ |
|--------|----------|--------|
| POST | `/api/data` | ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å ESP32 |
| GET | `/api/latest` | ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î |

---

## 4Ô∏è‚É£ JSON (JavaScript Object Notation)

### JSON ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà:
- ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ (Human-readable)
- ‡πÄ‡∏ö‡∏≤ (Lightweight)
- ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏≤

### ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á JSON

```json
{
  "device_id": "esp32-01",
  "temp": 28.5,
  "hum": 65.3,
  "source": "virtual",
  "ts": "2025-02-16T10:30:00Z"
}
```

### Data Types ‡πÉ‡∏ô JSON

| Type | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|------|---------|---------|
| **String** | `"esp32-01"` | ‡πÉ‡∏™‡πà "" |
| **Number** | `28.5` | ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà "" |
| **Boolean** | `true`, `false` | ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å |
| **Null** | `null` | ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á |
| **Object** | `{"key": "value"}` | ‡πÉ‡∏ä‡πâ {} |
| **Array** | `[1, 2, 3]` | ‡πÉ‡∏ä‡πâ [] |

### JSON ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á vs ‡∏ú‡∏¥‡∏î

#### ‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

```json
{
  "device_id": "esp32-01",
  "temp": 28.5,
  "hum": 65.3
}
```

#### ‚ùå ‡∏ú‡∏¥‡∏î

```json
{
  device_id: "esp32-01",      // ‚ùå key ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ""
  "temp": 28.5,
  "hum": 65.3,                // ‚ùå ‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
}
```

### JSON ‡πÉ‡∏ô Arduino (ESP32)

#### ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON String

```cpp
String payload = "{";
payload += "\"device_id\":\"esp32-01\",";
payload += "\"temp\":" + String(28.5, 2) + ",";
payload += "\"hum\":" + String(65.3, 2);
payload += "}";

// ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: {"device_id":"esp32-01","temp":28.50,"hum":65.30}
```

#### Parse JSON (‡πÉ‡∏ä‡πâ ArduinoJson Library)

```cpp
#include <ArduinoJson.h>

String json = "{\"temp\":28.5,\"hum\":65.3}";

StaticJsonDocument<200> doc;
deserializeJson(doc, json);

float temp = doc["temp"];  // 28.5
float hum = doc["hum"];    // 65.3
```

---

## 5Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡πÅ‡∏ö‡∏ö Request-Response

### Flow ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

```
1. ESP32 ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor
   ‚îî‚îÄ> temp = 28.5, hum = 65.3

2. ESP32 ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON
   ‚îî‚îÄ> {"device_id":"esp32-01","temp":28.5,"hum":65.3}

3. ESP32 ‡∏™‡πà‡∏á HTTP POST
   ‚îî‚îÄ> POST http://192.168.1.50:8000/api/data

4. FastAPI ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
   ‚îî‚îÄ> Validate ‡∏ï‡∏≤‡∏° Pydantic Model

5. FastAPI ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
   ‚îî‚îÄ> {"ok":true,"latest":{...}}

6. ESP32 ‡∏£‡∏±‡∏ö Response
   ‚îî‚îÄ> ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô Serial Monitor
```

### Sequence Diagram

```
ESP32                    FastAPI Server
  |                            |
  |-- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor          |
  |                            |
  |-- ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON Payload      |
  |                            |
  |==== HTTP POST Request ===>|
  |                            |
  |                      Validate JSON
  |                      ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  |                            |
  |<==== HTTP Response ========|
  |                            |
  |-- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô Serial         |
  |                            |
```

---

## 6Ô∏è‚É£ ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ JSON?

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

1. **‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢** - ‡∏Ñ‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ
2. **‡πÄ‡∏ö‡∏≤** - ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤ XML
3. **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏≤** - Python, JavaScript, Java, C++
4. **‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≤‡∏Å‡∏•** - ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å

### ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô

#### JSON
```json
{"temp":28.5,"hum":65.3}
```
‡∏Ç‡∏ô‡∏≤‡∏î: **27 bytes**

#### XML
```xml
<data>
  <temp>28.5</temp>
  <hum>65.3</hum>
</data>
```
‡∏Ç‡∏ô‡∏≤‡∏î: **53 bytes**

#### Plain Text
```
temp=28.5&hum=65.3
```
‡∏Ç‡∏ô‡∏≤‡∏î: **18 bytes** ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á

---

## 7Ô∏è‚É£ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

### Scenario: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Temperature ‡πÅ‡∏•‡∏∞ Humidity

#### ESP32 Code (Simplified)

```cpp
// 1. ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ Sensor
float temp = 28.5;
float hum = 65.3;

// 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON
String json = "{\"device_id\":\"esp32-01\",";
json += "\"temp\":" + String(temp) + ",";
json += "\"hum\":" + String(hum) + "}";

// 3. ‡∏™‡πà‡∏á HTTP POST
HTTPClient http;
http.begin("http://192.168.1.50:8000/api/data");
http.addHeader("Content-Type", "application/json");

int code = http.POST(json);
String response = http.getString();

Serial.println(response);
http.end();
```

#### FastAPI Code (Simplified)

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class SensorData(BaseModel):
    device_id: str
    temp: float
    hum: float

@app.post("/api/data")
def receive(data: SensorData):
    print(f"Received: {data}")
    return {"ok": True}
```

---

## 8Ô∏è‚É£ Best Practices

### 1. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ Field ‡πÉ‡∏´‡πâ‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢

```json
// ‚úÖ ‡∏î‡∏µ
{"temperature_celsius": 28.5}

// ‚ùå ‡πÑ‡∏°‡πà‡∏î‡∏µ
{"t": 28.5}
```

### 2. ‡πÉ‡∏ä‡πâ Data Type ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

```json
// ‚úÖ ‡∏î‡∏µ
{"temp": 28.5, "count": 10}

// ‚ùå ‡πÑ‡∏°‡πà‡∏î‡∏µ
{"temp": "28.5", "count": "10"}
```

### 3. ‡πÄ‡∏û‡∏¥‡πà‡∏° Timestamp

```json
{
  "device_id": "esp32-01",
  "temp": 28.5,
  "ts": "2025-02-16T10:30:00Z"  // ‚úÖ ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏™‡πà‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà
}
```

### 4. Handle Errors

```cpp
if (httpCode == 200) {
  // Success
} else if (httpCode == 422) {
  Serial.println("Invalid JSON format!");
} else {
  Serial.println("Server error!");
}
```

---

## üéì ‡∏™‡∏£‡∏∏‡∏õ

| ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå |
|--------|---------|--------------|
| **Client-Server** | ‡πÅ‡∏ö‡πà‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô | ESP32 = Client, RPi = Server |
| **HTTP** | Protocol ‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ | ‡πÉ‡∏ä‡πâ POST ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, GET ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |
| **REST API** | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö API | /api/data, /api/latest |
| **JSON** | ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | {"device_id":"esp32-01",...} |

---

## üìö ‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [MDN: HTTP Overview](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview)
- [RESTful API Design](https://restfulapi.net/)
- [JSON.org](https://www.json.org/)
- [HTTP Status Codes](https://httpstat.us/)

---

## ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à

‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:

1. HTTP Method ‡πÑ‡∏´‡∏ô‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Server?
2. Status Code 200 ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏≠‡∏∞‡πÑ‡∏£?
3. JSON object ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏£‡∏≠‡∏ö?
4. ESP32 ‡πÄ‡∏õ‡πá‡∏ô Client ‡∏´‡∏£‡∏∑‡∏≠ Server?
5. REST API endpoint `/api/data` ‡∏Ñ‡∏∑‡∏≠ resource ‡∏≠‡∏∞‡πÑ‡∏£?

<details>
<summary>‡πÄ‡∏â‡∏•‡∏¢</summary>

1. **POST**
2. **OK (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)**
3. **{ }** (curly braces)
4. **Client**
5. **Endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sensor**
</details>
